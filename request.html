<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo List App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./style.css">
</head>

<body>

    <div class="form-group">
        <label for="FirstName">First Name</label>
        <input type="text" class="form-control" id="FirstName" placeholder="First Name">
    </div>

    <div class="form-group">
        <label for="LastName">Last Name</label>
        <input type="text" class="form-control" id="LastName" placeholder="First Name">
    </div>

    <div class="form-group col-md-6">
        <label for="BussinessEmail">Bussiness Email</label>
        <input type="email" class="form-control" id="BussinessEmail" placeholder="Email">
    </div>

    <div id="date-picker-example" class="md-form md-outline input-with-post-icon datepicker" inline="true">
        <label for="RequestDemoDate">Request Demo Date</label>
        <input id="RequestDemoDate" class="form-control" type="date" />
    </div>

    <div class="form-group col-md-6">
        <label for="CompanySize">Company Size</label>
        <input type="text" class="form-control" id="CompanySize" placeholder="Company Size">
    </div>

    <div class="form-group col-md-6">
        <label for="CompanyName">Company Name</label>
        <input type="text" class="form-control" id="CompanyName" placeholder="Company Name">
    </div>

    <button class="btn btn-primary" id="submit">Submit</button>


    <script>
        const firstName = document.getElementById("FirstName")
        const lastName = document.getElementById("LastName")
        const email = document.getElementById("BussinessEmail")
        const date = document.getElementById("RequestDemoDate")
        const size = document.getElementById("CompanySize")
        const company = document.getElementById("CompanyName")
        const submit = document.getElementById("submit")

        const validateEmail = (email) => {
            return String(email)
                .toLowerCase()
                .match(
                    /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
                );
        };

        function isPositiveInteger(str) {
            if (typeof str !== 'string') {
                return false;
            }

            const num = Number(str);

            if (Number.isInteger(num) && num > 0) {
                return true;
            }

            return false;
        }


        submit.addEventListener("click", () => {
            if (firstName.value === "" || lastName.value === "" || email.value === "" || date.value === "" ||
                size.value === "" || company.value === "") {
                alert("Please fill all the fields")
            } else {
                if (firstName.value.length < 3) {
                    alert("Please enter the first name at least 3 characters")
                    return
                }
                if (lastName.value.length < 6) {
                    alert("Please enter the last name at least 6 characters")
                    return
                }
                if (!validateEmail(email.value)) {
                    alert("Please enter a valid email")
                    return
                }
                if (!date.value) {
                    alert("Please pick a valid date")
                    return
                }
                if (!isPositiveInteger(size.value)) {
                    alert("Please input the valid number and the number is not equal to 0")
                    return
                }
                const requestDemo = {
                    firstName: firstName.value,
                    lastName: lastName.value,
                    date: date.value,
                    businessEmail: email.value,
                    companySize: size.value,
                    companyName: company.value
                }
                localStorage.setItem("request_demo", JSON.stringify(requestDemo))
                window.location.href = "index.html";
            }
        })
    </script>
</body>

</html>